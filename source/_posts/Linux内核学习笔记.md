---
title: Linux内核学习笔记
date: 2021-02-11 11:33:01
tags:
---

# 学习地址

https://www.bilibili.com/video/BV1AK4y1p7Cm?from=search&seid=11035193082978031589

# 操作系统体系结构与工程流程

**操作系统结构**

| 用户应用程序     |
| ---------------- |
| 操作系统的服务层 |
| 操作系统内核     |
| 硬件系统         |

**操作系统工作方式**

1. 把操作系统从用户态 切换到内核态。(用户应用程序到内核)

2. 实现操作系统的系统调用。(操作系统服务层)

3. 调用操作系统提供的底层函数。(内核)

   3.1操作系统的驱动结构。

4. 退出后从内核态切换到用户态。



**模块**

整体模块

* 进程调度模块。
* 内存管理模块。
* 文件系统模块。
* 进程间通信模块。
* 驱动管理模块。

模块关系

* 内存管理和驱动管理模块   虚拟缓存的缓存和回存机制。
* VFS 虚拟文件系统。 把硬件当成文件的形式来进行使用。

**操作系统的独立性**

​	管理层

​	实现层

易于升级和维护。



# 中断

目的

* 硬件的中断响应。   内核驱动的中断
* 系统调用的函数响应。 系统调用
* 自定义中断。 软件的软中断模式
* 信号中断。 
* 系统的异常和错误。

**linux的中断机制**

分类：硬中断，软中断。

* 硬中断
  * 硬件中断控制芯片发出的中断。
  * ARM中断控制器发出的中断。
* 软中断：
  * 异常 第一类：CPU自保留的中断。系统调用异常。

代码结构

asm.s                      trap.c

system_call.s         fork.c   signal.c  exit.c  sys.c



**中断工作流程**

* CPU工作模式的转化。
  * 进行寄存器的拷贝与压栈
* 设置中断异常向量表。

