---
title: gdb学习笔记
date: 2020-12-27 16:09:02
tags: [c,c++,gdb]
---

学习书籍：Debugging with GDB。

# 第二章：进入和离开GDB

## 2.1 调用GDB

* `gdb program` 指定调试程序
* `gdb program core` 指定可执行程序和core文件。
* `gdb program 1234` 指定进程id。



​	GDB会优先检查是否有一个core文件。

​	可以使用`-args`来让gdb传递参数给被调试的可执行程序，这个选项可以停止参数的执行。

​	`gdb -args gcc -O2 -c foo.c`

​	可以不输出开头信息，开头信息描述了GDB的非保障性。用`-silent`参数指定

​	`gdb -silent`

​	输入命令行参数来进一步控制GDB的启动。可以提示参数信息

​	`gdb -help`

​	序所有选项和命令行参数都以先后顺序处理。`-x`选项将会改变这一规则。

### 2.1.1 选择文件

​	启动时读取选项和参数。蚕食是固定指定可执行程序和core文件的(或者进程id)。这个分别用选项`-se`和`-c`(`-p`)指定的参数一样。

​	如果第二个参数用十进制表示，GDB会首先尝试attach到一个进程，如果失败了，会尝试将它作为corewe年打开。如果有十进制数字命名的core文件，可以添加前缀`.`来防止GDB将它误作为进程ID。

​	如果没有配置为支持core文件，会忽略第二个参数。

​	很多选项都有长短形式。

​	![](https://pic.imgdb.cn/item/5fe854d43ffa7d37b3cc866f.jpg)

-r

-readnow 立即读入每一个符号文件的符号表，而不是默认的那种在需要时才渐次读入的方式。初始阶段慢一点，而以后执行将更快。

### 2.1.2 选择模式

-nx
-n 不执行任何初始化文件里的命令。

`-quiet`
`-silent`
`-q` 不打印介绍和版权信息。在批处理模式下这些信息也不打印。

`-batch` 以批处理模式运行。运行完所有命令文件(用`x`指定)后以0状态退出。批处理模式在将GDB作为过滤器运行时很有用。例如下载和运行一个远程计算机上的程序。



`-batch-silent` 类似批处理模式运行，但是完全安静。GDB所有输出到stdout的信息都将禁止。



`-return-child-result`

​	GDB返回值是子进程的返回值。但是有以下例外：

1. GDB异常退出。
2. 用户用明确的值退出。
3. 子进程没有运行或不可结束。这种情况下的退出码是-1。



`-nowindows`

`nw` 如果GDB内建图形用户接口，这个命令让GDB只以命令行接口运行。

`-cd directory` GDB用directory作为它的工作目录，而不是当前目录。



