---
title: 'TCP-IP卷1:协议学习笔记'
date: 2020-10-30 18:12:54
tags: [TCP, IP, HTTP]
---

# 第1章 概述

## 1.1 体系结构原则

​	Internet体积结构在几个目标的指导下建立。首要目标是"发展一种重复利用已有的互联网络技术"。

​	基于首要目标，提供了以下的二级目标列表：

* Intemet通信在网络或网关失效时必须能持续。

* Intemet必须支持多种类型的通信服务。

* Intemet体系结构必须兼容多种网络。

* Intemet体系结构必须允许对其资源的分布式管理。

* Intemet体系结构必须是经济有效的。

* Intemet体系结构必须允许低能力主机的连接。

* Intemet中使用的资源必须是可统计的。

### 1.1.1 分组、连接和数据报

​	20世纪60年代，网络的概念主要基于电话网络。一次通话通常在双方建立一条连接。最初是一条物理线路。一次通话结束后，该线路被释放。后面电话网从模拟网络演变到数字网络。

​	20世纪60年代出现了一个重要思想是分组交换。分组交换中，包含一定字节数的数字信息分组独立通过网络。来自不同来源或发送方的块可以组合，而且以后可以分解，称为"多路复用"。有两个潜在优点：网络更有弹性; 基于统计复用可更好地利用网络链路和交换设备。

​	一台分组交换机接收到分组时，通常存储在缓存或队列中，并通过先到先服务的方式处理。合流量的主要方法。在统计复用中,流量基于到达的统计或时间模式而混合在一起。就像一条高速公路，车辆可以变换车道，但最终会分散到各处，任何点的收缩都可能造成道路繁忙。

​	某些替代技术，比如时分复用(TDM)和静态复用，通常在每个连接上保留一定量的时间或其他资源。虽然有更好的可预测性，但它可能无法充分利用带宽。

​	另一个相关的概念是消息边界或记录标记。如图1-1所示,当一个应用将多个信息块发 送到网络中,这些信息块可能被通信协议保留,也可能不被通信协议保留。大多数数据报协议保存消息边界。

### 1.1.2 端到端论点和命运共享

​	![](https://pic.imgdb.cn/item/5f97804a1cd1bbb86b0bd3eb.jpg)

图1-1

​	只有在通信系统端角度的应用知识的帮助下,才能完全和正确地实现问题中 提到的功能。因此,作为通信自身的一个特点,不可能提供有疑问的功能。 (有时, 通信系统提供的一个功能不完整的版本可能用于提高性能。)

​	端到端论点倾向一种使用"哑"网络和连接到网络的"智能"系统的设计方案。

​	命运共享建议将所有必要的状态放在通信断电，这些状态用于维护一个活动的通信关联。

### 1.1.3 差错控制和流量控制

​	在网络中存在数据损坏或丢失的情况。对于这种错误的处理称为**差错控制**。端到端论点和命运共享建议在应用程序附近或内部实现差错控制。

​	只有少数位出错的情况下, 当数据已被接收或正在传输过程中,有些数学代码可用于检测和修复这种位差错[LCO4]。这个任务通常在网络中执行。更多严重损坏发生在分组网络时，整个分组通常被重新发送或重新传输。在线路交换或虚电路交换的网络中，重新传输通常也在网络内部进行。

​	针对网络中可靠、按顺序交付的实现开销,帧中继和Intemet协议采用一种称为尽力而 为交付的服务。在尽力而为的交付中,网络不会花费很大努力来确保数据在没有差错或缺陷的情况下交付。某些差错通常用差错减压吗或校验和来检测。

​	如果尽力而为的交付成功,发送方能以超过接收方处理能力的速度生成信息。在尽力而 为的IP网络中,降低发送方的发送速度可通过流量控制机制实现,它在网络外部或通信系 正] 统高层中运行。

## 1.2 设计和实现

### 1.2.1 分层

​	每层只负责通信的一个方面。协议分层概念基于一个成为开放系统互联标准(OSI)模型。

​	尽管OSI模型建议的7个逻辑层在协议体系结构的模块化实现中是可取的,但是通常认 为TCP/IP体系结构包含5层。

![](https://pic.imgdb.cn/item/5f97b77c1cd1bbb86b174968.jpg)

图1-2

​	每层的简单描述描述如上图。每层都有不同的职责。从下至上：

* 物理层： 定义传输介质中传输数字信息的方法。
* 链路层：包含在共享相同介质的邻居间建立连接的协议或方法。有些链路层网络(比如DSL)只连接两个邻居。当超过一个邻居可以介入共享网络，这个网络就被称为多接入网络(multi-access network)。
* 网络层：对于分组网络(比如TCP/IP)，它提供了一种可交互的分组格式，它可以使用不同的链路层网络连接。还包含了主机寻址方案和路由算法，路由算法定义了将分组从一台主机发送到哪台主机。
* 传输层：提供了会话间的数据流，可能相当复杂, 取决于它提供的服务类型。
* 会话层： 表示运行中的应用之间的交互，会话层协议可提供例如连接初始化和重新启动、增加检查点(保存目前为止已完成的工作)等功能。
* 表示层：负责信息的格式转换与标准化编码。
* 应用层：最高层，各种应用通常会实现自己应用层协议。

### 1.2.2 分层实现中的复用、分解和封装

​	分层体系结构一个主要优点是具有协议复用的能力。允许多种协议共存于同一基础设施中。也允许协议对象的多个实例通识存在，并且不会被混淆。

​	复用可以发生在不同层，并且在每层都有不同类型的标识符。

![](https://pic.imgdb.cn/item/5f97c1c21cd1bbb86b19da1b.jpg)

​	图1-3

​	每层都有自己的消息对象的概念，对应于负责创建它的那个特定层。这就是封装的本质，每层都将来自上层的数据看成不透明、无须解释的信息。

​	建议的分层一个重要特点是：在单纯的分层中，并不是所有网络设备都需要实现所有层。

​	图1-4中，有些理想化的小型互联网络包括两种端系统，即交换机和路由器。左侧的主机对应的物理层实现了3中链路层协议以及允许在同一网络层协议上的3种传输层协议。端主机实现了所有层，交换机实现到第2层, 路由器实现到第3层。由于路由器具有互联不同类型的链路层网络的能力，因此它必须为互联的每种网络实现链路层协议。

![](https://pic.imgdb.cn/item/5f97c3351cd1bbb86b1a2fc5.jpg)

​	图1-4

​	